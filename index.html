<!DOCTYPE html>
<head><meta charset="utf-8"></head>

<canvas width="1920" height="1000"></canvas>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>


let canvas = document.querySelector("canvas"),
    context = canvas.getContext("2d"),
    width = canvas.width,
    height = canvas.height,
    radius = 25;

let circles = d3.range(7).map(function(i) {
    switch (i) {
        case 0:  return { x: 850, y: 100 ,}; break;
        case 1:  return { x: 880, y: 100 ,}; break;
        case 2:  return { x: 910, y: 100 ,}; break;
        case 3:  return { x: 865, y: 160 ,}; break;
        case 4:  return { x: 895, y: 160 ,}; break;
        case 5:  return { x: 880, y: 220 ,}; break;
        case 6:  return { x: 880, y: 520 ,}; break;
    
       
    }
  
});

let simulation = d3.forceSimulation(circles)
    .force("collide", d3.forceCollide(radius + 1).iterations(2))
    .on("tick", drawCircles);

d3.select(canvas)
    .call(d3.drag()
        .container(canvas)
        .subject(dragsubject)
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended));

function drawCircles() {
  context.clearRect(0, 0, width, height);
  context.save();
  context.beginPath();
  circles.forEach(drawCircle);
  context.strokeStyle = "black";
  context.fillStyle="green";
  context.fill();
  context.stroke();
}

function drawCircle(d) {
  context.moveTo(d.x + radius, d.y);
  context.arc(d.x, d.y, radius, 0, 2 * Math.PI);
 
}

function dragsubject() {
  return simulation.find(d3.event.x, d3.event.y, radius);
}

function dragstarted() {
  if (!d3.event.active) simulation.alphaTarget(0.3).restart();
  d3.event.subject.fx = d3.event.subject.x;
  d3.event.subject.fy = d3.event.subject.y;
}

function dragged() {
  d3.event.subject.fx = d3.event.x;
  d3.event.subject.fy = d3.event.y;
}

function dragended() {
  if (!d3.event.active) simulation.alphaTarget(0.3);
  d3.event.subject.fx = null;
  d3.event.subject.fy = null;
}

</script>